(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{842:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>Z});var i=t(5155),l=t(2115),r=t(9708),s=t(2085),n=t(9434);let o=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:a,variant:t,size:l,asChild:s=!1,...d}=e,c=s?r.DX:"button";return(0,i.jsx)(c,{"data-slot":"button",className:(0,n.cn)(o({variant:t,size:l,className:a})),...d})}function c(e){let{className:a,type:t,style:l,...r}=e;return(0,i.jsx)("input",{type:t,"data-slot":"input",className:(0,n.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),style:l,suppressHydrationWarning:!0,...r})}var u=t(4251),m=t(6474),h=t(5196),g=t(7863);function p(e){let{...a}=e;return(0,i.jsx)(u.bL,{"data-slot":"select",...a})}function f(e){let{...a}=e;return(0,i.jsx)(u.WT,{"data-slot":"select-value",...a})}function x(e){let{className:a,size:t="default",children:l,...r}=e;return(0,i.jsxs)(u.l9,{"data-slot":"select-trigger","data-size":t,className:(0,n.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...r,children:[l,(0,i.jsx)(u.In,{asChild:!0,children:(0,i.jsx)(m.A,{className:"size-4 opacity-50"})})]})}function v(e){let{className:a,children:t,position:l="popper",...r}=e;return(0,i.jsx)(u.ZL,{children:(0,i.jsxs)(u.UC,{"data-slot":"select-content",className:(0,n.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...r,children:[(0,i.jsx)(j,{}),(0,i.jsx)(u.LM,{className:(0,n.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,i.jsx)(y,{})]})})}function b(e){let{className:a,children:t,...l}=e;return(0,i.jsxs)(u.q7,{"data-slot":"select-item",className:(0,n.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",a),...l,children:[(0,i.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,i.jsx)(u.VF,{children:(0,i.jsx)(h.A,{className:"size-4"})})}),(0,i.jsx)(u.p4,{children:t})]})}function j(e){let{className:a,...t}=e;return(0,i.jsx)(u.PP,{"data-slot":"select-scroll-up-button",className:(0,n.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,i.jsx)(g.A,{className:"size-4"})})}function y(e){let{className:a,...t}=e;return(0,i.jsx)(u.wn,{"data-slot":"select-scroll-down-button",className:(0,n.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,i.jsx)(m.A,{className:"size-4"})})}var N=t(64);function w(e){let{className:a,...t}=e;return(0,i.jsx)(N.bL,{"data-slot":"tabs",className:(0,n.cn)("flex flex-col gap-2",a),...t})}function _(e){let{className:a,...t}=e;return(0,i.jsx)(N.B8,{"data-slot":"tabs-list",className:(0,n.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...t})}function E(e){let{className:a,...t}=e;return(0,i.jsx)(N.l9,{"data-slot":"tabs-trigger",className:(0,n.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...t})}function C(e){let{className:a,...t}=e;return(0,i.jsx)(N.UC,{"data-slot":"tabs-content",className:(0,n.cn)("flex-1 outline-none",a),...t})}var z=t(4416),S=t(3717),k=t(1284),V=t(133),q=t(9869),A=t(646),I=t(7434),M=t(1243),T=t(5339),R=t(1788);let D=[{id:1,name:"Tipo Alloggiato",length:2,type:"numeric",required:!0,category:"identification"},{id:2,name:"Data Arrivo",length:10,type:"alphanumeric",required:!0,category:"dates"},{id:3,name:"Cognome",length:50,type:"alphanumeric",required:!1,category:"personal",blank:!0},{id:4,name:"Nome",length:30,type:"alphanumeric",required:!1,category:"personal",blank:!0},{id:5,name:"Sesso",length:1,type:"numeric",required:!0,category:"personal"},{id:6,name:"Data Nascita",length:10,type:"alphanumeric",required:!0,category:"personal"},{id:7,name:"Codice Comune Nascita",length:9,type:"numeric",required:!1,category:"birth"},{id:8,name:"Sigla Provincia Nascita",length:2,type:"alphanumeric",required:!1,category:"birth"},{id:9,name:"Codice Stato Nascita",length:9,type:"numeric",required:!0,category:"birth"},{id:10,name:"Codice Cittadinanza",length:9,type:"numeric",required:!0,category:"citizenship"},{id:11,name:"Codice Comune Residenza",length:9,type:"numeric",required:"conditional",category:"residence"},{id:12,name:"Sigla Provincia Residenza",length:2,type:"alphanumeric",required:"conditional",category:"residence"},{id:13,name:"Codice Stato Residenza",length:9,type:"numeric",required:!0,category:"residence"},{id:14,name:"Indirizzo",length:50,type:"alphanumeric",required:!1,category:"residence",blank:!0},{id:15,name:"Codice Tipo Documento",length:5,type:"alphanumeric",required:!1,category:"document",blank:!0},{id:16,name:"Numero Documento",length:20,type:"alphanumeric",required:!1,category:"document",blank:!0},{id:17,name:"Luogo Rilascio Doc",length:9,type:"numeric",required:!1,category:"document",blank:!0},{id:18,name:"Data Partenza",length:10,type:"alphanumeric",required:"conditional",category:"dates"},{id:19,name:"Tipo Turismo",length:30,type:"alphanumeric",required:!0,category:"tourism"},{id:20,name:"Mezzo Trasporto",length:30,type:"alphanumeric",required:!0,category:"transport"},{id:21,name:"Camere Occupate",length:3,type:"numeric",required:"conditional",category:"accommodation"},{id:22,name:"Camere Disponibili",length:3,type:"numeric",required:"conditional",category:"accommodation"},{id:23,name:"Letti Disponibili",length:4,type:"numeric",required:"conditional",category:"accommodation"},{id:24,name:"Tassa Soggiorno",length:1,type:"numeric",required:!1,category:"fees"},{id:25,name:"Codice Identificativo Posizione",length:10,type:"alphanumeric",required:!0,category:"identification"},{id:26,name:"Modalit\xe0",length:1,type:"numeric",required:!0,category:"identification"}],O=["Culturale","Balneare","Congressuale/Affari","Fieristico","Sportivo/Fitness","Scolastico","Religioso","Sociale","Parchi Tematici","Termale/Trattamenti salute","Enogastronomico","Cicloturismo","Escursionistico/Naturalistico","Altro motivo","Non Specificato"],P=["Auto","Aereo","Aereo+Pullman","Aereo+Navetta/Taxi/Auto","Aereo+Treno","Treno","Pullman","Caravan/Autocaravan","Barca/Nave/Traghetto","Moto","Bicicletta","A piedi","Altro mezzo","Non Specificato"],L=[{value:"16",label:"Ospite Singolo"},{value:"17",label:"Capo Famiglia"},{value:"18",label:"Capo Gruppo"},{value:"19",label:"Familiare"},{value:"20",label:"Membro Gruppo"}],F=[{value:"",label:"Seleziona regione..."},{value:"abruzzo",label:"Abruzzo"},{value:"basilicata",label:"Basilicata"},{value:"calabria",label:"Calabria"},{value:"campania",label:"Campania"},{value:"emilia-romagna",label:"Emilia-Romagna"},{value:"friuli-venezia-giulia",label:"Friuli-Venezia Giulia"},{value:"lazio",label:"Lazio"},{value:"liguria",label:"Liguria"},{value:"lombardia",label:"Lombardia"},{value:"marche",label:"Marche"},{value:"molise",label:"Molise"},{value:"piemonte",label:"Piemonte"},{value:"puglia",label:"Puglia"},{value:"sardegna",label:"Sardegna"},{value:"sicilia",label:"Sicilia"},{value:"toscana",label:"Toscana"},{value:"trentino-alto-adige",label:"Trentino-Alto Adige"},{value:"umbria",label:"Umbria"},{value:"valle-d'aosta",label:"Valle d'Aosta"},{value:"veneto",label:"Veneto"}],X=(e,a)=>(e[a]||"").trim(),B=(e,a)=>e[a]||"",G=(e,a)=>{let t=D.find(e=>"field_".concat(e.id)===a);if(!t)return"";let i=X(e,a);if([3,4,14,15,16,17].includes(t.id))return"-";if(1===t.id){let e=L.find(e=>e.value===i);return e?e.label:i}return 5===t.id?"1"===i?"M":"2"===i?"F":i:24===t.id?"1"===i?"S\xec":"0"===i?"No":i:26===t.id?"1"===i?"Nuovo":"2"===i?"Variazione":"3"===i?"Eliminazione":i:i},U=(e,a)=>{let t=D.find(e=>e.id===a);if(!t)return{isValid:!0};let i=X(e,"field_".concat(a)),l=B(e,"field_".concat(a));if(t.blank)return l.length!==t.length?{isValid:!1,errorMessage:"".concat(t.name,": lunghezza errata (attesa ").concat(t.length,", trovata ").concat(l.length,")")}:{isValid:!0};if(l.length!==t.length)return{isValid:!1,errorMessage:"".concat(t.name,": lunghezza errata (attesa ").concat(t.length,", trovata ").concat(l.length,")")};if((!0===t.required||"conditional"===t.required)&&!i&&![11,12,21,22,23].includes(a))return{isValid:!1,errorMessage:"".concat(t.name,": obbligatorio")};let r=/^(\d{2})\/(\d{2})\/(\d{4})$/;switch(a){case 1:if(!["16","17","18","19","20"].includes(i))return{isValid:!1,errorMessage:"Tipo Alloggiato: valore non valido (16-20)"};break;case 2:if(!/^\d{2}\/\d{2}\/\d{4}$/.test(i))return{isValid:!1,errorMessage:"Data Arrivo: formato non valido (gg/mm/aaaa)"};let s=i.match(r);if(s){let e=parseInt(s[1]),a=parseInt(s[2]),t=parseInt(s[3]);if(a<1||a>12||e<1||e>31||t<1900||t>2100)return{isValid:!1,errorMessage:"Data Arrivo: data non valida"}}break;case 5:if(!["1","2"].includes(i))return{isValid:!1,errorMessage:"Sesso: valore non valido (1=maschio, 2=femmina)"};break;case 6:if(!/^\d{2}\/\d{2}\/\d{4}$/.test(i))return{isValid:!1,errorMessage:"Data Nascita: formato non valido (gg/mm/aaaa)"};let n=i.match(r);if(n){let e=parseInt(n[1]),a=parseInt(n[2]),t=parseInt(n[3]);if(a<1||a>12||e<1||e>31||t<1900||t>2100)return{isValid:!1,errorMessage:"Data Nascita: data non valida"}}break;case 9:if(!/^\d+$/.test(i))return{isValid:!1,errorMessage:"Codice Stato Nascita: deve essere numerico"};break;case 10:if(!/^\d+$/.test(i))return{isValid:!1,errorMessage:"Codice Cittadinanza: deve essere numerico"};break;case 11:if(i){if(!/^\d+$/.test(i))return{isValid:!1,errorMessage:"Codice Comune Residenza: deve essere numerico"}}else if("000"===X(e,"field_10"))return{isValid:!1,errorMessage:"Codice Comune Residenza: obbligatorio per cittadini italiani"};break;case 12:if(i){if(!/^[A-Za-z]{2}$/.test(i))return{isValid:!1,errorMessage:"Sigla Provincia Residenza: deve essere 2 lettere"}}else if("000"===X(e,"field_10"))return{isValid:!1,errorMessage:"Sigla Provincia Residenza: obbligatoria per cittadini italiani"};break;case 13:if(!i)return{isValid:!1,errorMessage:"Codice Stato Residenza: obbligatorio"};if(!/^\d+$/.test(i))return{isValid:!1,errorMessage:"Codice Stato Residenza: deve essere numerico"};break;case 18:if("2"===X(e,"field_26")){if(!i)return{isValid:!1,errorMessage:"Data Partenza: obbligatoria per modalit\xe0 Variazione"};if(!/^\d{2}\/\d{2}\/\d{4}$/.test(i))return{isValid:!1,errorMessage:"Data Partenza: formato non valido (gg/mm/aaaa)"};let e=i.match(r);if(e){let a=parseInt(e[1]),t=parseInt(e[2]),i=parseInt(e[3]);if(t<1||t>12||a<1||a>31||i<1900||i>2100)return{isValid:!1,errorMessage:"Data Partenza: data non valida"}}}break;case 19:if(!O.includes(i))return{isValid:!1,errorMessage:"Tipo Turismo: valore non valido"};break;case 20:if(!P.includes(i))return{isValid:!1,errorMessage:"Mezzo Trasporto: valore non valido"};break;case 21:case 22:case 23:let o=X(e,"field_1"),d=["16","17","18"].includes(o);if(console.log("DEBUG ".concat(t.name,": tipoAlloggiato=").concat(o,", requiresAccommodation=").concat(d,', rawValue="').concat(l,'", value="').concat(i,'"')),d){if(!l||""===l.trim())return console.log("DEBUG ".concat(t.name,": ERRORE - Campo obbligatorio ma vuoto per tipo ").concat(o)),{isValid:!1,errorMessage:"".concat(t.name,": obbligatorio per tipo alloggiato ").concat(o)};if(!/^\d+$/.test(i))return console.log("DEBUG ".concat(t.name,': ERRORE - Valore non numerico: "').concat(i,'"')),{isValid:!1,errorMessage:"".concat(t.name,": deve essere numerico")};console.log("DEBUG ".concat(t.name,": VALIDO - Valore numerico corretto"))}else{if(""!==i.trim())return console.log("DEBUG ".concat(t.name,": ERRORE - Dovrebbe essere vuoto per tipo ").concat(o,' ma contiene: "').concat(i,'"')),{isValid:!1,errorMessage:"".concat(t.name,": non deve essere compilato per tipo alloggiato ").concat(o)};console.log("DEBUG ".concat(t.name,": VALIDO - Correttamente vuoto per tipo ").concat(o))}break;case 24:if(i&&!["0","1"].includes(i))return{isValid:!1,errorMessage:"Tassa Soggiorno: valore non valido (0=no, 1=s\xec)"};break;case 25:break;case 26:if(!["1","2","3"].includes(i))return{isValid:!1,errorMessage:"Modalit\xe0: valore non valido (1=Nuovo, 2=Variazione, 3=Eliminazione)"};if("3"===i){for(let a of["field_1","field_2","field_25"])if(!X(e,a)){var c;let e=(null==(c=D.find(e=>"field_".concat(e.id)===a))?void 0:c.name)||a;return{isValid:!1,errorMessage:"Modalit\xe0 Eliminazione: ".concat(e," obbligatorio")}}}}return{isValid:!0}},$=(e,a)=>{let t={errors:[],warnings:[],info:[],hasErrors:!1,hasWarnings:!1,hasInfo:!1},i=X(e,"field_1"),l=X(e,"field_26"),r=X(e,"field_2"),s=X(e,"field_18"),n=X(e,"field_10"),o=X(e,"field_13"),d=X(e,"field_21"),c=X(e,"field_22"),u=X(e,"field_23");if(["16","17","18"].includes(i)&&("17"===i||"18"===i)&&(X(e,"field_25")||t.errors.push({isValid:!1,level:"error",message:"Codice identificativo posizione obbligatorio per ".concat("17"===i?"Capo Famiglia":"Capo Gruppo"),fieldId:25})),r&&s){let e=e=>{let[a,t,i]=e.split("/").map(Number);return new Date(i,t-1,a)},a=e(r),i=e(s);if(i<=a&&t.errors.push({isValid:!1,level:"error",message:"Data Partenza deve essere successiva a Data Arrivo",fieldId:18}),i>a){let e=Math.ceil((i.getTime()-a.getTime())/864e5);e>365&&t.warnings.push({isValid:!0,level:"warning",message:"Soggiorno prolungato: ".concat(e," giorni"),fieldId:18})}}if("000"===n&&"000"!==o&&t.warnings.push({isValid:!0,level:"warning",message:"Cittadino italiano con residenza all'estero",fieldId:13}),["16","17","18"].includes(i)){let e=parseInt(d)||0,a=parseInt(c)||0,l=parseInt(u)||0,r="16"===i?"Ospite Singolo":"17"===i?"Capo Famiglia":"Capo Gruppo";d&&0!==e||t.errors.push({isValid:!1,level:"error",message:"Camere Occupate obbligatorie per ".concat(r),fieldId:21}),c&&0!==a||t.errors.push({isValid:!1,level:"error",message:"Camere Disponibili obbligatorie per ".concat(r),fieldId:22}),u&&0!==l||t.errors.push({isValid:!1,level:"error",message:"Letti Disponibili obbligatori per ".concat(r),fieldId:23}),e>a&&a>0&&t.errors.push({isValid:!1,level:"error",message:"Camere occupate non possono superare camere disponibili",fieldId:21}),e>0&&l>0&&e>l&&t.warnings.push({isValid:!0,level:"warning",message:"Pi\xf9 camere occupate che letti disponibili",fieldId:21})}"3"===l&&(["field_1","field_2","field_25"].forEach(a=>{if(!X(e,a)){var i;let e=parseInt(a.replace("field_",""));t.errors.push({isValid:!1,level:"error",message:"Campo obbligatorio per eliminazione: ".concat(null==(i=D.find(a=>a.id===e))?void 0:i.name),fieldId:e})}}),D.filter(e=>![1,2,25,26].includes(e.id)).forEach(a=>{X(e,"field_".concat(a.id))&&t.warnings.push({isValid:!0,level:"warning",message:"Campo non necessario per eliminazione: ".concat(a.name),fieldId:a.id})}));let m=X(e,"field_6");if(r&&m){let e=e=>{let[a,t,i]=e.split("/").map(Number);return new Date(i,t-1,a)},a=e(m),l=e(r).getFullYear()-a.getFullYear();l<0?t.errors.push({isValid:!1,level:"error",message:"Data di nascita posteriore alla data di arrivo",fieldId:6}):l>120?t.warnings.push({isValid:!0,level:"warning",message:"Et\xe0 anomala: ".concat(l," anni"),fieldId:6}):l<18&&!["19","20"].includes(i)&&t.info.push({isValid:!0,level:"info",message:"Ospite minorenne: ".concat(l," anni"),fieldId:6})}let h=X(e,"field_7"),g=X(e,"field_8"),p=X(e,"field_9");"000"===n&&"000"===p&&(h||t.errors.push({isValid:!1,level:"error",message:"Codice comune nascita obbligatorio per cittadini italiani nati in Italia",fieldId:7}),g||t.errors.push({isValid:!1,level:"error",message:"Sigla provincia nascita obbligatoria per cittadini italiani nati in Italia",fieldId:8}));let f=X(e,"field_19"),x=X(e,"field_20");return"Balneare"===f&&"Aereo"===x&&t.info.push({isValid:!0,level:"info",message:"Combinazione turismo balneare con trasporto aereo",fieldId:20}),"Cicloturismo"===f&&"Auto"===x&&t.info.push({isValid:!0,level:"info",message:"Cicloturismo con trasporto auto (probabile trasporto bici)",fieldId:20}),t.hasErrors=t.errors.length>0,t.hasWarnings=t.warnings.length>0,t.hasInfo=t.info.length>0,t},W=async(e,a,t,i,l,r,s,n)=>{a(!0),t([]),i({});try{let i=await e.text(),o=new DOMParser().parseFromString(i,"text/xml");if(o.querySelector("parsererror")){t(["Errore nel parsing del file XML: formato non valido"]),a(!1);return}let d=[],c=o.querySelectorAll("movimento");if(0===c.length){t(["Nessun movimento trovato nel file XML"]),a(!1);return}let u=1;if(c.forEach(e=>{var a,t,i,l;let r=(null==(a=e.querySelector("data"))?void 0:a.textContent)||"",s=8===r.length?"".concat(r.substring(6,8),"/").concat(r.substring(4,6),"/").concat(r.substring(0,4)):r,n=e.querySelector("struttura"),o=(null==n||null==(t=n.querySelector("camereoccupate"))?void 0:t.textContent)||"0",c=(null==n||null==(i=n.querySelector("cameredisponibili"))?void 0:i.textContent)||"0",m=(null==n||null==(l=n.querySelector("lettidisponibili"))?void 0:l.textContent)||"0";e.querySelectorAll("arrivi > arrivo").forEach(e=>{var a,t,i,l,r,n,h,g,p,f,x,v;let b={},j=(null==(a=e.querySelector("idswh"))?void 0:a.textContent)||"",y=(null==(t=e.querySelector("tipoalloggiato"))?void 0:t.textContent)||"16";null==(i=e.querySelector("idcapo"))||i.textContent;let N=(null==(l=e.querySelector("sesso"))?void 0:l.textContent)||"1",w=(null==(r=e.querySelector("cittadinanza"))?void 0:r.textContent)||"",_=(null==(n=e.querySelector("statoresidenza"))?void 0:n.textContent)||"",E=(null==(h=e.querySelector("luogoresidenza"))?void 0:h.textContent)||"",C=(null==(g=e.querySelector("datanascita"))?void 0:g.textContent)||"",z=(null==(p=e.querySelector("statonascita"))?void 0:p.textContent)||"",S=(null==(f=e.querySelector("comunenascita"))?void 0:f.textContent)||"",k=(null==(x=e.querySelector("tipoturismo"))?void 0:x.textContent)||"NON SPECIFICATO",V=(null==(v=e.querySelector("mezzotrasporto"))?void 0:v.textContent)||"NON SPECIFICATO",q=8===C.length?"".concat(C.substring(6,8),"/").concat(C.substring(4,6),"/").concat(C.substring(0,4)):C;b.field_1=y.padEnd(2," "),b.field_2=s.padEnd(10," "),b.field_3="".padEnd(50," "),b.field_4="".padEnd(30," "),b.field_5=("M"===N?"1":"F"===N?"2":"1").padEnd(1," "),b.field_6=q.padEnd(10," "),b.field_7=(S||"").padEnd(9," "),b.field_8="".padEnd(2," "),b.field_9=(z||w).padEnd(9," "),b.field_10=w.padEnd(9," "),b.field_11=(E||"").padEnd(9," "),b.field_12="".padEnd(2," "),b.field_13=_.padEnd(9," "),b.field_14="".padEnd(50," "),b.field_15="".padEnd(5," "),b.field_16="".padEnd(20," "),b.field_17="".padEnd(9," "),b.field_18="".padEnd(10," "),b.field_19=k.padEnd(30," "),b.field_20=V.padEnd(30," "),b.field_21=o.padEnd(3," "),b.field_22=c.padEnd(3," "),b.field_23=m.padEnd(4," "),b.field_24="".padEnd(1," "),b.field_25=j.padEnd(10," "),b.field_26="1".padEnd(1," "),d.push(b),u++}),e.querySelectorAll("prenotazioni > prenotazione").forEach(e=>{var a,t,i,l,r;let s=(null==(a=e.querySelector("arrivo"))?void 0:a.textContent)||"",n=(null==(t=e.querySelector("partenza"))?void 0:t.textContent)||"",o=parseInt((null==(i=e.querySelector("ospiti"))?void 0:i.textContent)||"0"),h=8===s.length?"".concat(s.substring(6,8),"/").concat(s.substring(4,6),"/").concat(s.substring(0,4)):s;if(o>0){let a={};a.field_1="16".padEnd(2," "),a.field_2=h.padEnd(10," "),a.field_3="".padEnd(50," "),a.field_4="".padEnd(30," "),a.field_5="1".padEnd(1," "),a.field_6="".padEnd(10," "),a.field_7="".padEnd(9," "),a.field_8="".padEnd(2," "),a.field_9="".padEnd(9," "),a.field_10="".padEnd(9," "),a.field_11="".padEnd(9," "),a.field_12="".padEnd(2," "),a.field_13="".padEnd(9," "),a.field_14="".padEnd(50," "),a.field_15="".padEnd(5," "),a.field_16="".padEnd(20," "),a.field_17="".padEnd(9," "),a.field_18=8===n.length?"".concat(n.substring(6,8),"/").concat(n.substring(4,6),"/").concat(n.substring(0,4)).padEnd(10," "):"".padEnd(10," "),a.field_19="NON SPECIFICATO".padEnd(30," "),a.field_20="NON SPECIFICATO".padEnd(30," "),a.field_21="1".padEnd(3," "),a.field_22=c.padEnd(3," "),a.field_23=m.padEnd(4," "),a.field_24="".padEnd(1," "),a.field_25=(null==(r=e.querySelector("idswh"))||null==(l=r.textContent)?void 0:l.padEnd(10," "))||"PREN".concat(u).padEnd(10," "),a.field_26="1".padEnd(1," "),d.push(a),u++}})}),0===d.length){t(["Nessun record valido trovato nel file XML"]),a(!1);return}l(d),setTimeout(()=>{d.forEach((e,a)=>{r(a,e)}),setTimeout(()=>{s(),n("valid")},100)},100)}catch(e){t(["Errore durante la lettura del file XML: "+e.message])}finally{a(!1)}},H=async(e,a,t,i,l,r,s,n,o)=>{a(!0),t([]),i({});try{let a=(await e.text()).split(/\r?\n/).filter(e=>e.trim()),t=[];for(let e=0;e<a.length;e++){let i=a[e],l={},r=0;for(let e of D){let a=i.substring(r,r+e.length);l["field_".concat(e.id)]=a,r+=e.length}X(l,"field_19")||(l.field_19="Non Specificato".padEnd(30," ")),X(l,"field_20")||(l.field_20="Non Specificato".padEnd(30," ")),t.push(l)}l(t),setTimeout(()=>{t.forEach((e,a)=>{r(a,e)}),setTimeout(()=>{s(),t.filter((e,a)=>{let i=t[a];return!!i&&!D.some(e=>!o(i,e.id).isValid)}).length,t.length,n("valid")},100)},100)}catch(e){t(["Errore durante la lettura del file: "+e.message])}finally{a(!1)}},Y=async(e,a,t,i,l)=>{console.log("\uD83D\uDD04 Generating TXT file, filterValid:",e);let r="",s=a.filter((a,l)=>{if(!e)return t(l)||(i[l]||[]).length>0;{let e=!t(l)&&0===(i[l]||[]).length;return console.log("Record ".concat(l+1,": hasMissing=").concat(t(l),", errorsCount=").concat((i[l]||[]).length,", isValid=").concat(e)),e}});if(console.log("Found ".concat(s.length," records to include")),0===s.length)return void alert("Nessun record da scaricare con i criteri selezionati");for(let e of s){for(let a of D){let t=X(e,"field_".concat(a.id)),i="";r+="numeric"===a.type||[21,22,23].includes(a.id)?t.padStart(a.length," ").substring(0,a.length):t.padEnd(a.length," ").substring(0,a.length)}r+="\r\n"}try{let a=l?l.name.replace(/\.(txt|xml)$/i,""):"ROSS1000",t="".concat(a).concat(e?"_VALIDI":"_ERRORI",".txt");console.log("✅ Generating client-side Blob for:",t);let i=new Blob([r],{type:"text/plain;charset=utf-8"}),s=URL.createObjectURL(i),n=document.createElement("a");n.href=s,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(s),console.log("✅ Download initiated")}catch(e){console.error("❌ Download failed:",e),alert("Errore durante il download: ".concat(e))}};function Z(){let[e,a]=(0,l.useState)(null),[t,r]=(0,l.useState)([]),[s,n]=(0,l.useState)([]),[o,u]=(0,l.useState)({}),[h,g]=(0,l.useState)({}),[j,y]=(0,l.useState)({}),[N,B]=(0,l.useState)(!1),[Z,J]=(0,l.useState)(null),[K,Q]=(0,l.useState)(null),[ee,ea]=(0,l.useState)(""),[et,ei]=(0,l.useState)("valid"),[el,er]=(0,l.useState)({}),[es,en]=(0,l.useState)(""),[eo,ed]=(0,l.useState)(!1),[ec,eu]=(0,l.useState)(!1),[em,eh]=(0,l.useState)(!1),[eg,ep]=(0,l.useState)({email:"",password:"",regione:""}),ef=(e,a)=>{ea(X(t[e],a)),Q({recordIndex:e,fieldId:a})},ex=()=>{Q(null),ea("")},ev=(e,a,t)=>{ey(e,a,t),Q(null),ea("")},eb=(e,a)=>{let l=D.find(e=>e.id===a);if(!l)return null;let r=(null==K?void 0:K.recordIndex)===e&&(null==K?void 0:K.fieldId)==="field_".concat(a),s="".concat(e,"_").concat(a),n=h[s]||!1,o=j[s]||!1;return(0,i.jsx)("td",{className:"px-3 py-2 text-sm border-r border-slate-200 whitespace-nowrap ".concat(n?"bg-red-100 text-red-800":o&&"valid"===et?"bg-green-50 text-green-700":""),children:r?(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[1===a&&(0,i.jsxs)(p,{value:ee,onValueChange:t=>{let i=t.padEnd(l.length," ").substring(0,l.length);ev(e,"field_".concat(a),i)},children:[(0,i.jsx)(x,{className:"h-7 text-xs w-full",children:(0,i.jsx)(f,{placeholder:""})}),(0,i.jsx)(v,{children:L.map(e=>(0,i.jsx)(b,{value:e.value,children:e.label},e.value))})]}),5===a&&(0,i.jsxs)(p,{value:ee,onValueChange:t=>{let i=t.padEnd(l.length," ").substring(0,l.length);ev(e,"field_".concat(a),i)},children:[(0,i.jsx)(x,{className:"h-7 text-xs w-20",children:(0,i.jsx)(f,{placeholder:""})}),(0,i.jsxs)(v,{children:[(0,i.jsx)(b,{value:"1",children:"M"}),(0,i.jsx)(b,{value:"2",children:"F"})]})]}),19===a&&(0,i.jsxs)(p,{value:ee,onValueChange:t=>{let i=t.padEnd(l.length," ").substring(0,l.length);ev(e,"field_".concat(a),i)},children:[(0,i.jsx)(x,{className:"h-7 text-xs w-full",children:(0,i.jsx)(f,{placeholder:""})}),(0,i.jsx)(v,{children:O.map(e=>(0,i.jsx)(b,{value:e,children:e},e))})]}),20===a&&(0,i.jsxs)(p,{value:ee,onValueChange:t=>{let i=t.padEnd(l.length," ").substring(0,l.length);ev(e,"field_".concat(a),i)},children:[(0,i.jsx)(x,{className:"h-7 text-xs w-full",children:(0,i.jsx)(f,{placeholder:""})}),(0,i.jsx)(v,{children:P.map(e=>(0,i.jsx)(b,{value:e,children:e},e))})]}),24===a&&(0,i.jsxs)(p,{value:ee,onValueChange:t=>{let i=t.padEnd(l.length," ").substring(0,l.length);ev(e,"field_".concat(a),i)},children:[(0,i.jsx)(x,{className:"h-7 text-xs w-20",children:(0,i.jsx)(f,{placeholder:""})}),(0,i.jsxs)(v,{children:[(0,i.jsx)(b,{value:"1",children:"S\xec"}),(0,i.jsx)(b,{value:"0",children:"No"})]})]}),26===a&&(0,i.jsxs)(p,{value:ee,onValueChange:t=>{let i=t.padEnd(l.length," ").substring(0,l.length);ev(e,"field_".concat(a),i)},children:[(0,i.jsx)(x,{className:"h-7 text-xs w-28",children:(0,i.jsx)(f,{placeholder:""})}),(0,i.jsxs)(v,{children:[(0,i.jsx)(b,{value:"1",children:"Nuovo"}),(0,i.jsx)(b,{value:"2",children:"Variazione"}),(0,i.jsx)(b,{value:"3",children:"Eliminazione"})]})]}),![1,5,19,20,24,26].includes(a)&&(0,i.jsx)(c,{value:ee,onChange:e=>ea(e.target.value),className:"h-7 text-xs w-full",maxLength:l.length,autoFocus:!0,onKeyDown:t=>{if("Enter"===t.key){t.preventDefault();let i=ee;i="numeric"===l.type||[21,22,23].includes(l.id)?ee.padStart(l.length," ").substring(0,l.length):ee.padEnd(l.length," ").substring(0,l.length),ev(e,"field_".concat(a),i),t.currentTarget.blur()}"Escape"===t.key&&(t.preventDefault(),ex())},onBlur:()=>{let t=ee;t="numeric"===l.type||[21,22,23].includes(l.id)?ee.padStart(l.length," ").substring(0,l.length):ee.padEnd(l.length," ").substring(0,l.length),ev(e,"field_".concat(a),t)}}),(0,i.jsx)(d,{variant:"ghost",size:"sm",onClick:ex,className:"h-5 w-5 p-0 flex-shrink-0",children:(0,i.jsx)(z.A,{className:"h-3 w-3"})})]}):(0,i.jsxs)("div",{className:"flex items-center justify-between gap-2 group cursor-pointer",onClick:()=>![3,4,14,15,16,17].includes(a)&&ef(e,"field_".concat(a)),children:[(0,i.jsx)("span",{className:"text-sm truncate",title:G(t[e],"field_".concat(a)),children:G(t[e],"field_".concat(a))||"-"}),![3,4,14,15,16,17].includes(a)&&(0,i.jsx)(S.A,{className:"h-3 w-3 opacity-0 group-hover:opacity-50 flex-shrink-0"})]})},a)},ej=(0,l.useCallback)(e=>{var t;let i=null==(t=e.target.files)?void 0:t[0];if(!i)return;let l=i.name.toLowerCase();if(!l.endsWith(".txt")&&!l.endsWith(".xml"))return void n(["Per favore seleziona un file TXT o XML"]);a(i),l.endsWith(".txt")?H(i,B,n,y,r,ew,e_,ei,U):l.endsWith(".xml")&&W(i,B,n,y,r,ew,e_,ei)},[]),ey=(e,a,t)=>{r(i=>{let l=[...i],r=D.find(e=>"field_".concat(e.id)===a);if(r){let i;i="numeric"===r.type||[21,22,23].includes(r.id)?t.toString().padStart(r.length," ").substring(0,r.length):t.toString().padEnd(r.length," ").substring(0,r.length),l[e]={...l[e],[a]:i},setTimeout(()=>{eN(e,l[e])},10)}return l})},eN=(e,a)=>{if(!a)return;let t=[],i={},l={};D.forEach(r=>{let s="".concat(e,"_").concat(r.id),n=U(a,r.id);n.isValid?h[s]&&(l[s]=!0):(n.errorMessage&&t.push(n.errorMessage),i[s]=!0,delete l[s])});let r=$(a,e);r.hasErrors&&r.errors.forEach(a=>{if(a.fieldId){let r="".concat(e,"_").concat(a.fieldId);i[r]=!0,delete l[r],a.message&&t.push(a.message)}}),u(a=>({...a,[e]:t})),g(a=>{let t={...a};return D.forEach(a=>{let i="".concat(e,"_").concat(a.id);delete t[i]}),{...t,...i}}),y(e=>({...e,...l})),er(a=>({...a,[e]:r}))},ew=(e,a)=>{let i=a||t[e];if(!i)return;let l=[],r={},s={};D.forEach(a=>{let t="".concat(e,"_").concat(a.id),n=U(i,a.id);n.isValid?h[t]&&(s[t]=!0):(n.errorMessage&&l.push(n.errorMessage),r[t]=!0,delete s[t])});let n=$(i,e);n.hasErrors&&n.errors.forEach(a=>{if(a.fieldId){let t="".concat(e,"_").concat(a.fieldId);r[t]=!0,delete s[t],a.message&&l.push(a.message)}}),u(a=>({...a,[e]:l})),g(a=>{let t={...a};return D.forEach(a=>{let i="".concat(e,"_").concat(a.id);delete t[i]}),{...t,...r}}),y(e=>({...e,...s})),er(a=>({...a,[e]:n}))},e_=()=>(t.forEach((e,a)=>{ew(a,e)}),setTimeout(()=>{let e=[];t.forEach((a,t)=>{let i=o[t]||[];e.push(...i.map(e=>"Record ".concat(t+1,": ").concat(e)))}),n(e)},0),!t.some((e,a)=>{let i=t[a];return!!i&&D.some(e=>!U(i,e.id).isValid)})),eE=e=>{let a=t[e];if(!a)return!1;if((o[e]||[]).length>0)return!0;let i=el[e];return null!=i&&!!i.hasErrors||D.some(e=>(!0===e.required||"conditional"===e.required)&&!U(a,e.id).isValid)},eC=async e=>{e.preventDefault();try{let e=await fetch("".concat("","/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(eg)}),a=await e.json();if(!e.ok)throw Error(a.error||"Login fallito");ed(!1),ep({email:"",password:"",regione:""}),eu(!0),alert("Login effettuato con successo! Ora puoi inviare l'XML a ROSS 1000.")}catch(e){alert("Errore login: ".concat(e.message))}};return t.some((e,a)=>!eE(a)&&0===(o[a]||[]).length),(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[(0,i.jsx)("header",{className:"bg-white border-b border-slate-200 shadow-sm sticky top-0 z-50",children:(0,i.jsx)("div",{className:"max-w-[1800px] mx-auto px-6 py-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("div",{className:"flex items-center gap-4",children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-teal-600 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-md",children:"R"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-xl font-semibold text-slate-800",children:"ROSS 1000"}),(0,i.jsx)("p",{className:"text-xs text-slate-500",children:"Validazione File TXT"})]})]})}),(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsxs)("div",{className:"relative group",children:[(0,i.jsx)("button",{className:"w-8 h-8 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center text-slate-500 hover:text-slate-700 transition-all",children:(0,i.jsx)(k.A,{className:"h-4 w-4"})}),(0,i.jsxs)("div",{className:"absolute right-0 top-10 w-72 bg-slate-800 text-white text-xs rounded-lg p-3 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50 shadow-xl",children:[(0,i.jsx)("p",{className:"font-semibold mb-2",children:"ROSS 1000 Validator"}),(0,i.jsx)("p",{className:"mb-2",children:"Strumento per la validazione dei file TXT secondo il tracciato ROSS 1000 (v.4 – 20/10/2022)."}),(0,i.jsx)("p",{className:"mb-1",children:(0,i.jsx)("strong",{children:"Come usare:"})}),(0,i.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-slate-300",children:[(0,i.jsx)("li",{children:"Carica un file TXT"}),(0,i.jsx)("li",{children:"Visualizza i record validi/non validi"}),(0,i.jsx)("li",{children:"Modifica i campi cliccandoci sopra"}),(0,i.jsx)("li",{children:"Scarica il file corretto"})]}),(0,i.jsx)("div",{className:"absolute -top-2 right-4 w-3 h-3 bg-slate-800 rotate-45"})]})]}),(0,i.jsxs)(d,{variant:"outline",size:"sm",onClick:()=>{a(null),r([]),n([]),u({}),g({}),y({}),er({}),en(""),ed(!1),eu(!1),eh(!1),ep({email:"",password:"",regione:""}),ei("valid"),J(null),Q(null),ea("");let e=document.getElementById("file-upload");e&&(e.value="")},className:"flex items-center gap-2 text-slate-600 hover:text-slate-800 border-slate-300",children:[(0,i.jsx)(V.A,{className:"h-4 w-4"}),"Reset"]})]})]})})}),(0,i.jsxs)("main",{className:"max-w-[1800px] mx-auto px-6 py-8",children:[(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"bg-white rounded-xl border-2 border-dashed border-slate-300 hover:border-teal-400 transition-all duration-300 px-4 py-3 relative group cursor-pointer hover:shadow-md",children:[(0,i.jsx)(c,{id:"file-upload",type:"file",accept:".txt,.xml",onChange:ej,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),(0,i.jsxs)("div",{className:"flex items-center gap-3 pointer-events-none",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-teal-100 to-teal-50 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform",children:(0,i.jsx)(q.A,{className:"h-5 w-5 text-teal-600"})}),(0,i.jsxs)("div",{className:"min-w-0",children:[(0,i.jsx)("h3",{className:"text-sm font-semibold text-slate-800",children:"Carica File"}),e?(0,i.jsxs)("div",{className:"flex items-center gap-1 text-teal-600 text-xs font-medium truncate",children:[(0,i.jsx)(A.A,{className:"h-3 w-3 flex-shrink-0"}),(0,i.jsx)("span",{className:"truncate",children:e.name})]}):(0,i.jsx)("p",{className:"text-xs text-slate-500",children:"TXT o XML"})]})]})]}),(0,i.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 px-4 py-3 shadow-sm hover:shadow-md transition-shadow",children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-100 to-blue-50 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,i.jsx)(I.A,{className:"h-5 w-5 text-blue-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-slate-800",children:t.length}),(0,i.jsx)("div",{className:"text-xs text-slate-500",children:"Record Totali"})]})]})}),(0,i.jsx)("div",{className:"bg-white rounded-xl border border-slate-200 px-4 py-3 shadow-sm hover:shadow-md transition-shadow",children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-red-100 to-red-50 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,i.jsx)(M.A,{className:"h-5 w-5 text-red-600"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-slate-800",children:t.filter((e,a)=>eE(a)||(o[a]||[]).length>0).length}),(0,i.jsx)("div",{className:"text-xs text-slate-500",children:"Record con Errori"})]})]})})]})}),s.length>0&&(0,i.jsxs)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg overflow-hidden",children:[(0,i.jsxs)("button",{onClick:()=>eh(!em),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-red-100/50 transition-colors",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-red-600",children:[(0,i.jsx)(T.A,{className:"h-4 w-4"}),(0,i.jsxs)("span",{className:"font-medium",children:[s.length," errori di parsing rilevati"]})]}),(0,i.jsx)(m.A,{className:"h-4 w-4 text-red-500 transition-transform duration-200 ".concat(em?"rotate-180":"")})]}),em&&(0,i.jsx)("div",{className:"px-4 pb-3 pt-0 border-t border-red-200",children:(0,i.jsx)("div",{className:"space-y-1 text-sm text-red-700 mt-2 max-h-48 overflow-y-auto",children:s.map((e,a)=>(0,i.jsx)("div",{children:e},a))})})]}),t.length>0&&(0,i.jsx)("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:(0,i.jsxs)(w,{value:et,onValueChange:e=>ei(e),children:[(0,i.jsx)("div",{className:"px-4 py-3 border-b border-slate-200 bg-slate-50/50",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)(_,{className:"bg-transparent p-0 gap-6 h-auto",children:[(0,i.jsxs)(E,{value:"valid",className:"px-0 py-0 h-auto bg-transparent data-[state=active]:bg-transparent data-[state=active]:shadow-none text-slate-400 data-[state=active]:text-teal-600 hover:text-slate-600 transition-colors font-medium",children:[(0,i.jsx)(A.A,{className:"h-4 w-4 mr-2"}),"Record Validi (",t.filter((e,a)=>!eE(a)&&0===(o[a]||[]).length).length,")"]}),(0,i.jsxs)(E,{value:"invalid",className:"px-0 py-0 h-auto bg-transparent data-[state=active]:bg-transparent data-[state=active]:shadow-none text-slate-400 data-[state=active]:text-red-600 hover:text-slate-600 transition-colors font-medium",children:[(0,i.jsx)(M.A,{className:"h-4 w-4 mr-2"}),"Record Non Validi (",t.filter((e,a)=>eE(a)||(o[a]||[]).length>0).length,")"]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:["valid"===et&&(0,i.jsxs)(d,{onClick:()=>Y(!0,t,eE,o,e),className:"flex items-center gap-2 bg-teal-600 hover:bg-teal-700 text-white shadow-sm hover:shadow-md transition-all",disabled:0===t.filter((e,a)=>!eE(a)&&0===(o[a]||[]).length).length,children:[(0,i.jsx)(R.A,{className:"h-4 w-4"}),"Scarica TXT"]}),"invalid"===et&&(0,i.jsxs)(d,{onClick:()=>Y(!1,t,eE,o,e),className:"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white shadow-sm hover:shadow-md transition-all",disabled:0===t.filter((e,a)=>eE(a)||(o[a]||[]).length>0).length,children:[(0,i.jsx)(R.A,{className:"h-4 w-4"}),"Scarica TXT"]})]})]})}),(0,i.jsx)(C,{value:"valid",className:"mt-0 p-0",children:(0,i.jsx)("div",{className:"overflow-x-auto -mt-px",children:(0,i.jsx)("div",{className:"overflow-y-auto",style:{maxHeight:"65vh"},children:(0,i.jsxs)("table",{className:"w-full text-sm",children:[(0,i.jsx)("thead",{className:"sticky top-0 z-20",children:(0,i.jsxs)("tr",{className:"bg-teal-600 text-white",children:[(0,i.jsx)("th",{className:"px-3 py-3 text-center font-semibold text-xs uppercase tracking-wider border-r border-teal-500/30 sticky left-0 z-30 bg-teal-600 w-12",children:"#"}),D.map(e=>(0,i.jsx)("th",{className:"px-3 py-3 text-left font-semibold text-xs uppercase tracking-wider border-r border-teal-500/30 whitespace-nowrap",children:e.name},e.id))]})}),(0,i.jsx)("tbody",{className:"divide-y divide-slate-100",children:t.map((e,a)=>{let t=eE(a),l=(o[a]||[]).length>0,r=el[a];return t||l?null:(0,i.jsxs)("tr",{className:"hover:bg-teal-50/50 transition-colors",children:[(0,i.jsx)("td",{className:"px-3 py-3 font-medium text-slate-600 border-r border-slate-100 sticky left-0 z-10 bg-white w-12",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-teal-100 text-teal-700 text-xs font-bold",children:a+1}),(null==r?void 0:r.hasWarnings)&&(0,i.jsx)("div",{className:"w-2 h-2 bg-amber-400 rounded-full",title:"Avvertimenti"})]})}),D.map(e=>eb(a,e.id))]},a)})})]})})})}),(0,i.jsx)(C,{value:"invalid",className:"mt-0 p-0",children:(0,i.jsx)("div",{className:"overflow-x-auto -mt-px",children:(0,i.jsx)("div",{className:"overflow-y-auto",style:{maxHeight:"65vh"},children:(0,i.jsxs)("table",{className:"w-full text-sm",children:[(0,i.jsx)("thead",{className:"sticky top-0 z-20",children:(0,i.jsxs)("tr",{className:"bg-red-600 text-white",children:[(0,i.jsx)("th",{className:"px-3 py-3 text-center font-semibold text-xs uppercase tracking-wider border-r border-red-500/30 sticky left-0 z-30 bg-red-600 w-12",children:"#"}),D.map(e=>(0,i.jsx)("th",{className:"px-3 py-3 text-left font-semibold text-xs uppercase tracking-wider border-r border-red-500/30 whitespace-nowrap",children:e.name},e.id))]})}),(0,i.jsx)("tbody",{className:"divide-y divide-slate-100",children:t.map((e,a)=>{let t=eE(a),l=(o[a]||[]).length>0,r=el[a];return t||l?(0,i.jsxs)("tr",{className:"hover:bg-red-50/50 transition-colors bg-red-50/30",children:[(0,i.jsx)("td",{className:"px-3 py-3 font-medium text-slate-600 border-r border-slate-100 sticky left-0 z-10 bg-[#fffbfb] w-12",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-red-100 text-red-700 text-xs font-bold",children:a+1}),(null==r?void 0:r.hasWarnings)&&(0,i.jsx)("div",{className:"w-2 h-2 bg-amber-400 rounded-full",title:"Avvertimenti"})]})}),D.map(e=>eb(a,e.id))]},a):null})})]})})})})]})}),N&&(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center py-16",children:[(0,i.jsx)("div",{className:"w-12 h-12 border-4 border-teal-200 border-t-teal-500 rounded-full animate-spin mb-4"}),(0,i.jsx)("p",{className:"text-slate-600 font-medium",children:"Elaborazione file in corso..."})]}),!N&&0===t.length&&(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center py-24 text-center",children:[(0,i.jsx)("div",{className:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mb-6",children:(0,i.jsx)(I.A,{className:"h-10 w-10 text-slate-400"})}),(0,i.jsx)("h3",{className:"text-xl font-semibold text-slate-700 mb-2",children:"Nessun file caricato"}),(0,i.jsx)("p",{className:"text-slate-500 max-w-md",children:"Carica un file TXT per iniziare la validazione dei dati ROSS 1000"})]})]}),eo&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>ed(!1),children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-8 w-[380px] shadow-2xl relative",onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("button",{onClick:()=>ed(!1),className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600 transition-colors",children:(0,i.jsx)(z.A,{className:"h-5 w-5"})}),(0,i.jsxs)("div",{className:"text-center mb-6",children:[(0,i.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-teal-500 to-teal-600 rounded-xl flex items-center justify-center text-white font-bold text-lg mx-auto mb-4",children:"R"}),(0,i.jsx)("h3",{className:"text-xl font-semibold text-slate-800",children:"Accedi per inviare"})]}),(0,i.jsxs)("form",{onSubmit:eC,className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Regione"}),(0,i.jsx)("select",{value:eg.regione,onChange:e=>ep({...eg,regione:e.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all",required:!0,children:F.map(e=>(0,i.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email"}),(0,i.jsx)("input",{type:"email",value:eg.email,onChange:e=>ep({...eg,email:e.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all",placeholder:"email@hotel.com",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Password"}),(0,i.jsx)("input",{type:"password",value:eg.password,onChange:e=>ep({...eg,password:e.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all",placeholder:"********",required:!0})]}),(0,i.jsx)("button",{type:"submit",className:"w-full bg-gradient-to-r from-teal-500 to-teal-600 hover:from-teal-600 hover:to-teal-700 text-white px-4 py-3 rounded-xl font-medium transition-all shadow-lg shadow-teal-200",children:"Login"})]})]})})]})}},2537:(e,a,t)=>{Promise.resolve().then(t.bind(t,842))},9434:(e,a,t)=>{"use strict";t.d(a,{cn:()=>r});var i=t(2596),l=t(9688);function r(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,l.QP)((0,i.$)(a))}}},e=>{var a=a=>e(e.s=a);e.O(0,[798,202,441,684,358],()=>a(2537)),_N_E=e.O()}]);