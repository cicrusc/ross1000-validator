(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2537:(e,t,a)=>{Promise.resolve().then(a.bind(a,6787))},6787:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>X});var i=a(5155),r=a(2115),l=a(9708),s=a(2085),n=a(9434);let o=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:a,size:r,asChild:s=!1,...d}=e,c=s?l.DX:"button";return(0,i.jsx)(c,{"data-slot":"button",className:(0,n.cn)(o({variant:a,size:r,className:t})),...d})}function c(e){let{className:t,type:a,style:r,...l}=e;return(0,i.jsx)("input",{type:a,"data-slot":"input",className:(0,n.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),style:r,suppressHydrationWarning:!0,...l})}var u=a(4251),m=a(6474),g=a(5196),p=a(7863);function h(e){let{...t}=e;return(0,i.jsx)(u.bL,{"data-slot":"select",...t})}function f(e){let{...t}=e;return(0,i.jsx)(u.WT,{"data-slot":"select-value",...t})}function x(e){let{className:t,size:a="default",children:r,...l}=e;return(0,i.jsxs)(u.l9,{"data-slot":"select-trigger","data-size":a,className:(0,n.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l,children:[r,(0,i.jsx)(u.In,{asChild:!0,children:(0,i.jsx)(m.A,{className:"size-4 opacity-50"})})]})}function v(e){let{className:t,children:a,position:r="popper",...l}=e;return(0,i.jsx)(u.ZL,{children:(0,i.jsxs)(u.UC,{"data-slot":"select-content",className:(0,n.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...l,children:[(0,i.jsx)(y,{}),(0,i.jsx)(u.LM,{className:(0,n.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,i.jsx)(j,{})]})})}function b(e){let{className:t,children:a,...r}=e;return(0,i.jsxs)(u.q7,{"data-slot":"select-item",className:(0,n.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[(0,i.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,i.jsx)(u.VF,{children:(0,i.jsx)(g.A,{className:"size-4"})})}),(0,i.jsx)(u.p4,{children:a})]})}function y(e){let{className:t,...a}=e;return(0,i.jsx)(u.PP,{"data-slot":"select-scroll-up-button",className:(0,n.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,i.jsx)(p.A,{className:"size-4"})})}function j(e){let{className:t,...a}=e;return(0,i.jsx)(u.wn,{"data-slot":"select-scroll-down-button",className:(0,n.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,i.jsx)(m.A,{className:"size-4"})})}var N=a(64);function w(e){let{className:t,...a}=e;return(0,i.jsx)(N.bL,{"data-slot":"tabs",className:(0,n.cn)("flex flex-col gap-2",t),...a})}function _(e){let{className:t,...a}=e;return(0,i.jsx)(N.B8,{"data-slot":"tabs-list",className:(0,n.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...a})}function E(e){let{className:t,...a}=e;return(0,i.jsx)(N.l9,{"data-slot":"tabs-trigger",className:(0,n.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}function C(e){let{className:t,...a}=e;return(0,i.jsx)(N.UC,{"data-slot":"tabs-content",className:(0,n.cn)("flex-1 outline-none",t),...a})}let z=(0,s.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function S(e){let{className:t,variant:a,...r}=e;return(0,i.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,n.cn)(z({variant:a}),t),...r})}function k(e){let{className:t,...a}=e;return(0,i.jsx)("div",{"data-slot":"alert-description",className:(0,n.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...a})}var V=a(4416),q=a(3717),A=a(133),M=a(9869),I=a(646),T=a(7434),R=a(1243),D=a(5339),O=a(1788);let L=[{id:1,name:"Tipo Alloggiato",length:2,type:"numeric",required:!0,category:"identification"},{id:2,name:"Data Arrivo",length:10,type:"alphanumeric",required:!0,category:"dates"},{id:3,name:"Cognome",length:50,type:"alphanumeric",required:!1,category:"personal",blank:!0},{id:4,name:"Nome",length:30,type:"alphanumeric",required:!1,category:"personal",blank:!0},{id:5,name:"Sesso",length:1,type:"numeric",required:!0,category:"personal"},{id:6,name:"Data Nascita",length:10,type:"alphanumeric",required:!0,category:"personal"},{id:7,name:"Codice Comune Nascita",length:9,type:"numeric",required:!1,category:"birth"},{id:8,name:"Sigla Provincia Nascita",length:2,type:"alphanumeric",required:!1,category:"birth"},{id:9,name:"Codice Stato Nascita",length:9,type:"numeric",required:!0,category:"birth"},{id:10,name:"Codice Cittadinanza",length:9,type:"numeric",required:!0,category:"citizenship"},{id:11,name:"Codice Comune Residenza",length:9,type:"numeric",required:"conditional",category:"residence"},{id:12,name:"Sigla Provincia Residenza",length:2,type:"alphanumeric",required:"conditional",category:"residence"},{id:13,name:"Codice Stato Residenza",length:9,type:"numeric",required:!0,category:"residence"},{id:14,name:"Indirizzo",length:50,type:"alphanumeric",required:!1,category:"residence",blank:!0},{id:15,name:"Codice Tipo Documento",length:5,type:"alphanumeric",required:!1,category:"document",blank:!0},{id:16,name:"Numero Documento",length:20,type:"alphanumeric",required:!1,category:"document",blank:!0},{id:17,name:"Luogo Rilascio Doc",length:9,type:"numeric",required:!1,category:"document",blank:!0},{id:18,name:"Data Partenza",length:10,type:"alphanumeric",required:"conditional",category:"dates"},{id:19,name:"Tipo Turismo",length:30,type:"alphanumeric",required:!0,category:"tourism"},{id:20,name:"Mezzo Trasporto",length:30,type:"alphanumeric",required:!0,category:"transport"},{id:21,name:"Camere Occupate",length:3,type:"numeric",required:"conditional",category:"accommodation"},{id:22,name:"Camere Disponibili",length:3,type:"numeric",required:"conditional",category:"accommodation"},{id:23,name:"Letti Disponibili",length:4,type:"numeric",required:"conditional",category:"accommodation"},{id:24,name:"Tassa Soggiorno",length:1,type:"numeric",required:!1,category:"fees"},{id:25,name:"Codice Identificativo Posizione",length:10,type:"alphanumeric",required:!0,category:"identification"},{id:26,name:"Modalit\xe0",length:1,type:"numeric",required:!0,category:"identification"}],P=["Culturale","Balneare","Congressuale/Affari","Fieristico","Sportivo/Fitness","Scolastico","Religioso","Sociale","Parchi Tematici","Termale/Trattamenti salute","Enogastronomico","Cicloturismo","Escursionistico/Naturalistico","Altro motivo","Non Specificato"],F=["Auto","Aereo","Aereo+Pullman","Aereo+Navetta/Taxi/Auto","Aereo+Treno","Treno","Pullman","Caravan/Autocaravan","Barca/Nave/Traghetto","Moto","Bicicletta","A piedi","Altro mezzo","Non Specificato"],W=[{value:"16",label:"Ospite Singolo"},{value:"17",label:"Capo Famiglia"},{value:"18",label:"Capo Gruppo"},{value:"19",label:"Familiare"},{value:"20",label:"Membro Gruppo"}];function X(){let[e,t]=(0,r.useState)(null),[a,l]=(0,r.useState)([]),[s,n]=(0,r.useState)([]),[o,u]=(0,r.useState)({}),[m,g]=(0,r.useState)({}),[p,y]=(0,r.useState)({}),[j,N]=(0,r.useState)(!1),[z,X]=(0,r.useState)(null),[B,G]=(0,r.useState)(null),[U,$]=(0,r.useState)(""),[H,Y]=(0,r.useState)("valid"),[Z,J]=(0,r.useState)({}),[K,Q]=(0,r.useState)(""),[ee,et]=(0,r.useState)(!1),[ea,ei]=(0,r.useState)(!1),[er,el]=(0,r.useState)({email:"",password:"",regione:""}),es=(e,t)=>{$(ec(a[e],t)),G({recordIndex:e,fieldId:t})},en=()=>{G(null),$("")},eo=(e,t,a)=>{ef(e,t,a),G(null),$("")},ed=(e,t)=>e[t]||"",ec=(e,t)=>(e[t]||"").trim(),eu=(e,t)=>{let a=L.find(e=>"field_".concat(e.id)===t);if(!a)return"";let i=ec(e,t);if([3,4,14,15,16,17].includes(a.id))return"-";if(1===a.id){let e=W.find(e=>e.value===i);return e?e.label:i}return 5===a.id?"1"===i?"M":"2"===i?"F":i:24===a.id?"1"===i?"S\xec":"0"===i?"No":i:26===a.id?"1"===i?"Nuovo":"2"===i?"Variazione":"3"===i?"Eliminazione":i:i},em=(e,t)=>{let r=L.find(e=>e.id===t);if(!r)return null;let l=(null==B?void 0:B.recordIndex)===e&&(null==B?void 0:B.fieldId)==="field_".concat(t),s="".concat(e,"_").concat(t),n=m[s]||!1,o=p[s]||!1,u=(()=>{if(3===t||4===t||14===t||15===t||16===t||17===t)return 50;if(1===t)return 120;if(5===t)return 60;if(19===t||20===t)return 140;if(24===t)return 50;if(26===t||2===t||6===t||7===t||9===t||10===t||11===t||13===t||18===t)return 100;let i=ec(a[e],"field_".concat(t));return Math.max(7*(i.length>0?i.length:10),80)})();return(0,i.jsx)("td",{className:"px-2 py-1 border-r border-gray-200 last:border-r-0 ".concat(n?"bg-[#ffcccc] text-black font-semibold border-2 border-[#ff9999]":o&&"valid"===H?"bg-[#e6f7f5] text-[#11b3a2] font-semibold border-2 border-[#11b3a2]":""),style:{minWidth:u+"px",width:u+"px"},children:l?(0,i.jsxs)("div",{className:"flex items-center gap-1",style:{width:u+"px"},children:[1===t&&(0,i.jsxs)(h,{value:U,onValueChange:e=>$(e),children:[(0,i.jsx)(x,{className:"h-7 text-xs",style:{width:u-20+"px"},children:(0,i.jsx)(f,{placeholder:""})}),(0,i.jsx)(v,{children:W.map(e=>(0,i.jsx)(b,{value:e.value,children:e.label},e.value))})]}),5===t&&(0,i.jsxs)(h,{value:U,onValueChange:e=>$(e),children:[(0,i.jsx)(x,{className:"h-7 text-xs",style:{width:u-20+"px"},children:(0,i.jsx)(f,{placeholder:""})}),(0,i.jsxs)(v,{children:[(0,i.jsx)(b,{value:"1",children:"M"}),(0,i.jsx)(b,{value:"2",children:"F"})]})]}),19===t&&(0,i.jsxs)(h,{value:U,onValueChange:e=>$(e),children:[(0,i.jsx)(x,{className:"h-7 text-xs",style:{width:u-20+"px"},children:(0,i.jsx)(f,{placeholder:""})}),(0,i.jsx)(v,{children:P.map(e=>(0,i.jsx)(b,{value:e,children:e},e))})]}),20===t&&(0,i.jsxs)(h,{value:U,onValueChange:e=>$(e),children:[(0,i.jsx)(x,{className:"h-7 text-xs",style:{width:u-20+"px"},children:(0,i.jsx)(f,{placeholder:""})}),(0,i.jsx)(v,{children:F.map(e=>(0,i.jsx)(b,{value:e,children:e},e))})]}),24===t&&(0,i.jsxs)(h,{value:U,onValueChange:e=>$(e),children:[(0,i.jsx)(x,{className:"h-7 text-xs",style:{width:u-20+"px"},children:(0,i.jsx)(f,{placeholder:""})}),(0,i.jsxs)(v,{children:[(0,i.jsx)(b,{value:"1",children:"S\xec"}),(0,i.jsx)(b,{value:"0",children:"No"})]})]}),26===t&&(0,i.jsxs)(h,{value:U,onValueChange:e=>$(e),children:[(0,i.jsx)(x,{className:"h-7 text-xs",style:{width:u-20+"px"},children:(0,i.jsx)(f,{placeholder:""})}),(0,i.jsxs)(v,{children:[(0,i.jsx)(b,{value:"1",children:"Nuovo"}),(0,i.jsx)(b,{value:"2",children:"Variazione"}),(0,i.jsx)(b,{value:"3",children:"Eliminazione"})]})]}),![1,5,19,20,24,26].includes(t)&&(0,i.jsx)(c,{value:U,onChange:e=>$(e.target.value),className:"h-7 text-xs",style:{width:u-20+"px"},maxLength:r.length,autoFocus:!0,onKeyDown:a=>{if("Enter"===a.key){a.preventDefault();let i=U;i="numeric"===r.type||[21,22,23].includes(r.id)?U.padStart(r.length," ").substring(0,r.length):U.padEnd(r.length," ").substring(0,r.length),eo(e,"field_".concat(t),i),a.currentTarget.blur()}"Escape"===a.key&&(a.preventDefault(),en())},onBlur:()=>{let a=U;a="numeric"===r.type||[21,22,23].includes(r.id)?U.padStart(r.length," ").substring(0,r.length):U.padEnd(r.length," ").substring(0,r.length),eo(e,"field_".concat(t),a)}}),(0,i.jsx)(d,{variant:"ghost",size:"sm",onClick:en,className:"h-5 w-5 p-0 flex-shrink-0",children:(0,i.jsx)(V.A,{className:"h-3 w-3"})})]}):(0,i.jsxs)("div",{className:"flex items-center justify-between group",style:{width:u+"px"},children:[(0,i.jsx)("span",{className:"text-xs ".concat(n?"text-white font-bold":""),title:eu(a[e],"field_".concat(t)),style:{maxWidth:u-25+"px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"inline-block"},children:eu(a[e],"field_".concat(t))||"-"}),(0,i.jsx)(d,{variant:"ghost",size:"sm",onClick:()=>es(e,"field_".concat(t)),className:"h-5 w-5 p-0 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",style:{display:[3,4,14,15,16,17].includes(t)?"none":"flex"},children:(0,i.jsx)(q.A,{className:"h-3 w-3"})})]})},t)},eg=(0,r.useCallback)(e=>{var a;let i=null==(a=e.target.files)?void 0:a[0];if(!i)return;let r=i.name.toLowerCase();if(!r.endsWith(".txt")&&!r.endsWith(".xml"))return void n(["Per favore seleziona un file TXT o XML"]);t(i),r.endsWith(".txt")?eh(i):r.endsWith(".xml")&&ep(i)},[]),ep=async e=>{N(!0),n([]),y({});try{let t=await e.text(),a=new DOMParser().parseFromString(t,"text/xml");if(a.querySelector("parsererror")){n(["Errore nel parsing del file XML: formato non valido"]),N(!1);return}let i=[],r=a.querySelectorAll("movimento");if(0===r.length){n(["Nessun movimento trovato nel file XML"]),N(!1);return}let s=1;if(r.forEach(e=>{var t,a,r,l;let n=(null==(t=e.querySelector("data"))?void 0:t.textContent)||"",o=8===n.length?"".concat(n.substring(6,8),"/").concat(n.substring(4,6),"/").concat(n.substring(0,4)):n,d=e.querySelector("struttura"),c=(null==d||null==(a=d.querySelector("camereoccupate"))?void 0:a.textContent)||"0",u=(null==d||null==(r=d.querySelector("cameredisponibili"))?void 0:r.textContent)||"0",m=(null==d||null==(l=d.querySelector("lettidisponibili"))?void 0:l.textContent)||"0";e.querySelectorAll("arrivi > arrivo").forEach(e=>{var t,a,r,l,n,d,g,p,h,f,x,v;let b={},y=(null==(t=e.querySelector("idswh"))?void 0:t.textContent)||"",j=(null==(a=e.querySelector("tipoalloggiato"))?void 0:a.textContent)||"16";null==(r=e.querySelector("idcapo"))||r.textContent;let N=(null==(l=e.querySelector("sesso"))?void 0:l.textContent)||"1",w=(null==(n=e.querySelector("cittadinanza"))?void 0:n.textContent)||"",_=(null==(d=e.querySelector("statoresidenza"))?void 0:d.textContent)||"",E=(null==(g=e.querySelector("luogoresidenza"))?void 0:g.textContent)||"",C=(null==(p=e.querySelector("datanascita"))?void 0:p.textContent)||"",z=(null==(h=e.querySelector("statonascita"))?void 0:h.textContent)||"",S=(null==(f=e.querySelector("comunenascita"))?void 0:f.textContent)||"",k=(null==(x=e.querySelector("tipoturismo"))?void 0:x.textContent)||"NON SPECIFICATO",V=(null==(v=e.querySelector("mezzotrasporto"))?void 0:v.textContent)||"NON SPECIFICATO",q=8===C.length?"".concat(C.substring(6,8),"/").concat(C.substring(4,6),"/").concat(C.substring(0,4)):C;b.field_1=j.padEnd(2," "),b.field_2=o.padEnd(10," "),b.field_3="".padEnd(50," "),b.field_4="".padEnd(30," "),b.field_5=("M"===N?"1":"F"===N?"2":"1").padEnd(1," "),b.field_6=q.padEnd(10," "),b.field_7=(S||"").padEnd(9," "),b.field_8="".padEnd(2," "),b.field_9=(z||w).padEnd(9," "),b.field_10=w.padEnd(9," "),b.field_11=(E||"").padEnd(9," "),b.field_12="".padEnd(2," "),b.field_13=_.padEnd(9," "),b.field_14="".padEnd(50," "),b.field_15="".padEnd(5," "),b.field_16="".padEnd(20," "),b.field_17="".padEnd(9," "),b.field_18="".padEnd(10," "),b.field_19=k.padEnd(30," "),b.field_20=V.padEnd(30," "),b.field_21=c.padEnd(3," "),b.field_22=u.padEnd(3," "),b.field_23=m.padEnd(4," "),b.field_24="".padEnd(1," "),b.field_25=y.padEnd(10," "),b.field_26="1".padEnd(1," "),i.push(b),s++}),e.querySelectorAll("prenotazioni > prenotazione").forEach(e=>{var t,a,r,l,n;let o=(null==(t=e.querySelector("arrivo"))?void 0:t.textContent)||"",d=(null==(a=e.querySelector("partenza"))?void 0:a.textContent)||"",c=parseInt((null==(r=e.querySelector("ospiti"))?void 0:r.textContent)||"0"),g=8===o.length?"".concat(o.substring(6,8),"/").concat(o.substring(4,6),"/").concat(o.substring(0,4)):o;if(c>0){let t={};t.field_1="16".padEnd(2," "),t.field_2=g.padEnd(10," "),t.field_3="".padEnd(50," "),t.field_4="".padEnd(30," "),t.field_5="1".padEnd(1," "),t.field_6="".padEnd(10," "),t.field_7="".padEnd(9," "),t.field_8="".padEnd(2," "),t.field_9="".padEnd(9," "),t.field_10="".padEnd(9," "),t.field_11="".padEnd(9," "),t.field_12="".padEnd(2," "),t.field_13="".padEnd(9," "),t.field_14="".padEnd(50," "),t.field_15="".padEnd(5," "),t.field_16="".padEnd(20," "),t.field_17="".padEnd(9," "),t.field_18=8===d.length?"".concat(d.substring(6,8),"/").concat(d.substring(4,6),"/").concat(d.substring(0,4)).padEnd(10," "):"".padEnd(10," "),t.field_19="NON SPECIFICATO".padEnd(30," "),t.field_20="NON SPECIFICATO".padEnd(30," "),t.field_21="1".padEnd(3," "),t.field_22=u.padEnd(3," "),t.field_23=m.padEnd(4," "),t.field_24="".padEnd(1," "),t.field_25=(null==(n=e.querySelector("idswh"))||null==(l=n.textContent)?void 0:l.padEnd(10," "))||"PREN".concat(s).padEnd(10," "),t.field_26="1".padEnd(1," "),i.push(t),s++}})}),0===i.length){n(["Nessun record valido trovato nel file XML"]),N(!1);return}l(i),setTimeout(()=>{i.forEach((e,t)=>{ey(t,e)}),setTimeout(()=>{ej(),Y("valid")},100)},100)}catch(e){n(["Errore durante la lettura del file XML: "+e.message])}finally{N(!1)}},eh=async e=>{N(!0),n([]),y({});try{let t=(await e.text()).split(/\r?\n/).filter(e=>e.trim()),a=[];for(let e=0;e<t.length;e++){let i=t[e],r={},l=0;for(let e of L){let t=i.substring(l,l+e.length);r["field_".concat(e.id)]=t,l+=e.length}ec(r,"field_19")||(r.field_19="Non Specificato".padEnd(30," ")),ec(r,"field_20")||(r.field_20="Non Specificato".padEnd(30," ")),a.push(r)}l(a),setTimeout(()=>{a.forEach((e,t)=>{ey(t,e)}),setTimeout(()=>{ej(),a.filter((e,t)=>{let i=a[t];return!!i&&!L.some(e=>!ev(i,e.id).isValid)}).length,a.length,Y("valid")},100)},100)}catch(e){n(["Errore durante la lettura del file: "+e.message])}finally{N(!1)}},ef=(e,t,a)=>{l(i=>{let r=[...i],l=L.find(e=>"field_".concat(e.id)===t);if(l){let i;i="numeric"===l.type||[21,22,23].includes(l.id)?a.toString().padStart(l.length," ").substring(0,l.length):a.toString().padEnd(l.length," ").substring(0,l.length),r[e]={...r[e],[t]:i},setTimeout(()=>{ex(e,r[e])},10)}return r})},ex=(e,t)=>{if(!t)return;let a=[],i={},r={};L.forEach(l=>{let s="".concat(e,"_").concat(l.id),n=ev(t,l.id);n.isValid?m[s]&&(r[s]=!0):(n.errorMessage&&a.push(n.errorMessage),i[s]=!0,delete r[s])}),u(t=>({...t,[e]:a})),g(t=>{let a={...t};return L.forEach(t=>{let i="".concat(e,"_").concat(t.id);delete a[i]}),{...a,...i}}),y(e=>({...e,...r}));let l=eb(t,e);J(t=>({...t,[e]:l}))},ev=(e,t)=>{let a=L.find(e=>e.id===t);if(!a)return{isValid:!0};let i=ec(e,"field_".concat(t)),r=ed(e,"field_".concat(t));if(a.blank)return r.length!==a.length?{isValid:!1,errorMessage:"".concat(a.name,": lunghezza errata (attesa ").concat(a.length,", trovata ").concat(r.length,")")}:{isValid:!0};if(r.length!==a.length)return{isValid:!1,errorMessage:"".concat(a.name,": lunghezza errata (attesa ").concat(a.length,", trovata ").concat(r.length,")")};if((!0===a.required||"conditional"===a.required)&&!i&&![11,12,21,22,23].includes(t))return{isValid:!1,errorMessage:"".concat(a.name,": obbligatorio")};let l=/^(\d{2})\/(\d{2})\/(\d{4})$/;switch(t){case 1:if(!["16","17","18","19","20"].includes(i))return{isValid:!1,errorMessage:"Tipo Alloggiato: valore non valido (16-20)"};break;case 2:if(!/^\d{2}\/\d{2}\/\d{4}$/.test(i))return{isValid:!1,errorMessage:"Data Arrivo: formato non valido (gg/mm/aaaa)"};let s=i.match(l);if(s){let e=parseInt(s[1]),t=parseInt(s[2]),a=parseInt(s[3]);if(t<1||t>12||e<1||e>31||a<1900||a>2100)return{isValid:!1,errorMessage:"Data Arrivo: data non valida"}}break;case 5:if(!["1","2"].includes(i))return{isValid:!1,errorMessage:"Sesso: valore non valido (1=maschio, 2=femmina)"};break;case 6:if(!/^\d{2}\/\d{2}\/\d{4}$/.test(i))return{isValid:!1,errorMessage:"Data Nascita: formato non valido (gg/mm/aaaa)"};let n=i.match(l);if(n){let e=parseInt(n[1]),t=parseInt(n[2]),a=parseInt(n[3]);if(t<1||t>12||e<1||e>31||a<1900||a>2100)return{isValid:!1,errorMessage:"Data Nascita: data non valida"}}break;case 9:if(!/^\d+$/.test(i))return{isValid:!1,errorMessage:"Codice Stato Nascita: deve essere numerico"};break;case 10:if(!/^\d+$/.test(i))return{isValid:!1,errorMessage:"Codice Cittadinanza: deve essere numerico"};break;case 11:if(i){if(!/^\d+$/.test(i))return{isValid:!1,errorMessage:"Codice Comune Residenza: deve essere numerico"}}else if("000"===ec(e,"field_10"))return{isValid:!1,errorMessage:"Codice Comune Residenza: obbligatorio per cittadini italiani"};break;case 12:if(i){if(!/^[A-Za-z]{2}$/.test(i))return{isValid:!1,errorMessage:"Sigla Provincia Residenza: deve essere 2 lettere"}}else if("000"===ec(e,"field_10"))return{isValid:!1,errorMessage:"Sigla Provincia Residenza: obbligatoria per cittadini italiani"};break;case 13:if(!i)return{isValid:!1,errorMessage:"Codice Stato Residenza: obbligatorio"};if(!/^\d+$/.test(i))return{isValid:!1,errorMessage:"Codice Stato Residenza: deve essere numerico"};break;case 18:if("2"===ec(e,"field_26")){if(!i)return{isValid:!1,errorMessage:"Data Partenza: obbligatoria per modalit\xe0 Variazione"};if(!/^\d{2}\/\d{2}\/\d{4}$/.test(i))return{isValid:!1,errorMessage:"Data Partenza: formato non valido (gg/mm/aaaa)"};let e=i.match(l);if(e){let t=parseInt(e[1]),a=parseInt(e[2]),i=parseInt(e[3]);if(a<1||a>12||t<1||t>31||i<1900||i>2100)return{isValid:!1,errorMessage:"Data Partenza: data non valida"}}}break;case 19:if(!P.includes(i))return{isValid:!1,errorMessage:"Tipo Turismo: valore non valido"};break;case 20:if(!F.includes(i))return{isValid:!1,errorMessage:"Mezzo Trasporto: valore non valido"};break;case 21:case 22:case 23:let o=ec(e,"field_1"),d=["16","17","18"].includes(o);if(console.log("DEBUG ".concat(a.name,": tipoAlloggiato=").concat(o,", requiresAccommodation=").concat(d,', rawValue="').concat(r,'", value="').concat(i,'"')),d){if(!r||""===r.trim())return console.log("DEBUG ".concat(a.name,": ERRORE - Campo obbligatorio ma vuoto per tipo ").concat(o)),{isValid:!1,errorMessage:"".concat(a.name,": obbligatorio per tipo alloggiato ").concat(o)};if(!/^\d+$/.test(i))return console.log("DEBUG ".concat(a.name,': ERRORE - Valore non numerico: "').concat(i,'"')),{isValid:!1,errorMessage:"".concat(a.name,": deve essere numerico")};console.log("DEBUG ".concat(a.name,": VALIDO - Valore numerico corretto"))}else{if(""!==i.trim())return console.log("DEBUG ".concat(a.name,": ERRORE - Dovrebbe essere vuoto per tipo ").concat(o,' ma contiene: "').concat(i,'"')),{isValid:!1,errorMessage:"".concat(a.name,": non deve essere compilato per tipo alloggiato ").concat(o)};console.log("DEBUG ".concat(a.name,": VALIDO - Correttamente vuoto per tipo ").concat(o))}break;case 24:if(i&&!["0","1"].includes(i))return{isValid:!1,errorMessage:"Tassa Soggiorno: valore non valido (0=no, 1=s\xec)"};break;case 25:break;case 26:if(!["1","2","3"].includes(i))return{isValid:!1,errorMessage:"Modalit\xe0: valore non valido (1=Nuovo, 2=Variazione, 3=Eliminazione)"};if("3"===i){for(let t of["field_1","field_2","field_25"])if(!ec(e,t)){var c;let e=(null==(c=L.find(e=>"field_".concat(e.id)===t))?void 0:c.name)||t;return{isValid:!1,errorMessage:"Modalit\xe0 Eliminazione: ".concat(e," obbligatorio")}}}}return{isValid:!0}},eb=(e,t)=>{let a={errors:[],warnings:[],info:[],hasErrors:!1,hasWarnings:!1,hasInfo:!1},i=ec(e,"field_1"),r=ec(e,"field_26"),l=ec(e,"field_2"),s=ec(e,"field_18"),n=ec(e,"field_10"),o=ec(e,"field_13"),d=ec(e,"field_21"),c=ec(e,"field_22"),u=ec(e,"field_23");if(["16","17","18"].includes(i)&&("17"===i||"18"===i)&&(ec(e,"field_25")||a.errors.push({isValid:!1,level:"error",message:"Codice identificativo posizione obbligatorio per ".concat("17"===i?"Capo Famiglia":"Capo Gruppo"),fieldId:25})),l&&s&&"2"===r){let e=e=>{let[t,a,i]=e.split("/").map(Number);return new Date(i,a-1,t)},t=e(l),i=e(s);i<=t&&a.errors.push({isValid:!1,level:"error",message:"Data partenza deve essere successiva alla data arrivo",fieldId:18});let r=Math.ceil((i.getTime()-t.getTime())/864e5);r>365&&a.warnings.push({isValid:!0,level:"warning",message:"Soggiorno prolungato: ".concat(r," giorni"),fieldId:18})}if("000"===n&&"000"!==o&&a.warnings.push({isValid:!0,level:"warning",message:"Cittadino italiano con residenza all'estero",fieldId:13}),["16","17","18"].includes(i)){let e=parseInt(d)||0,t=parseInt(c)||0,r=parseInt(u)||0,l="16"===i?"Ospite Singolo":"17"===i?"Capo Famiglia":"Capo Gruppo";d&&0!==e||a.errors.push({isValid:!1,level:"error",message:"Camere Occupate obbligatorie per ".concat(l),fieldId:21}),c&&0!==t||a.errors.push({isValid:!1,level:"error",message:"Camere Disponibili obbligatorie per ".concat(l),fieldId:22}),u&&0!==r||a.errors.push({isValid:!1,level:"error",message:"Letti Disponibili obbligatori per ".concat(l),fieldId:23}),e>t&&t>0&&a.errors.push({isValid:!1,level:"error",message:"Camere occupate non possono superare camere disponibili",fieldId:21}),e>0&&r>0&&e>r&&a.warnings.push({isValid:!0,level:"warning",message:"Pi\xf9 camere occupate che letti disponibili",fieldId:21})}"3"===r&&(["field_1","field_2","field_25"].forEach(t=>{if(!ec(e,t)){var i;let e=parseInt(t.replace("field_",""));a.errors.push({isValid:!1,level:"error",message:"Campo obbligatorio per eliminazione: ".concat(null==(i=L.find(t=>t.id===e))?void 0:i.name),fieldId:e})}}),L.filter(e=>![1,2,25,26].includes(e.id)).forEach(t=>{ec(e,"field_".concat(t.id))&&a.warnings.push({isValid:!0,level:"warning",message:"Campo non necessario per eliminazione: ".concat(t.name),fieldId:t.id})}));let m=ec(e,"field_6");if(l&&m){let e=e=>{let[t,a,i]=e.split("/").map(Number);return new Date(i,a-1,t)},t=e(m),r=e(l).getFullYear()-t.getFullYear();r<0?a.errors.push({isValid:!1,level:"error",message:"Data di nascita posteriore alla data di arrivo",fieldId:6}):r>120?a.warnings.push({isValid:!0,level:"warning",message:"Et\xe0 anomala: ".concat(r," anni"),fieldId:6}):r<18&&!["19","20"].includes(i)&&a.info.push({isValid:!0,level:"info",message:"Ospite minorenne: ".concat(r," anni"),fieldId:6})}let g=ec(e,"field_7"),p=ec(e,"field_8"),h=ec(e,"field_9");"000"===n&&"000"===h&&(g||a.errors.push({isValid:!1,level:"error",message:"Codice comune nascita obbligatorio per cittadini italiani nati in Italia",fieldId:7}),p||a.errors.push({isValid:!1,level:"error",message:"Sigla provincia nascita obbligatoria per cittadini italiani nati in Italia",fieldId:8}));let f=ec(e,"field_19"),x=ec(e,"field_20");return"Balneare"===f&&"Aereo"===x&&a.info.push({isValid:!0,level:"info",message:"Combinazione turismo balneare con trasporto aereo",fieldId:20}),"Cicloturismo"===f&&"Auto"===x&&a.info.push({isValid:!0,level:"info",message:"Cicloturismo con trasporto auto (probabile trasporto bici)",fieldId:20}),a.hasErrors=a.errors.length>0,a.hasWarnings=a.warnings.length>0,a.hasInfo=a.info.length>0,a},ey=(e,t)=>{let i=t||a[e];if(!i)return;let r=[],l={},s={};L.forEach(t=>{let a="".concat(e,"_").concat(t.id),n=ev(i,t.id);n.isValid?m[a]&&(s[a]=!0):(n.errorMessage&&r.push(n.errorMessage),l[a]=!0,delete s[a])}),u(t=>({...t,[e]:r})),g(t=>{let a={...t};return L.forEach(t=>{let i="".concat(e,"_").concat(t.id);delete a[i]}),{...a,...l}}),y(e=>({...e,...s}));let n=eb(i,e);J(t=>({...t,[e]:n}))},ej=()=>(a.forEach((e,t)=>{ey(t,e)}),setTimeout(()=>{let e=[];a.forEach((t,a)=>{let i=o[a]||[];e.push(...i.map(e=>"Record ".concat(a+1,": ").concat(e)))}),n(e)},0),!a.some((e,t)=>{let i=a[t];return!!i&&L.some(e=>!ev(i,e.id).isValid)})),eN=e=>{let t=a[e];if(!t)return!1;if((o[e]||[]).length>0)return!0;let i=Z[e];return null!=i&&!!i.hasErrors||L.some(e=>(!0===e.required||"conditional"===e.required)&&!ev(t,e.id).isValid)},ew=async function(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];console.log("\uD83D\uDD04 Generating TXT file, filterValid:",t);let i="",r=a.filter((e,a)=>{if(!t)return eN(a)||(o[a]||[]).length>0;{let e=!eN(a)&&0===(o[a]||[]).length;return console.log("Record ".concat(a+1,": hasMissing=").concat(eN(a),", errorsCount=").concat((o[a]||[]).length,", isValid=").concat(e)),e}});if(console.log("Found ".concat(r.length," records to include")),0===r.length)return void alert("Nessun record da scaricare con i criteri selezionati");for(let e of r){for(let t of L){let a=ec(e,"field_".concat(t.id)),r="";i+="numeric"===t.type||[21,22,23].includes(t.id)?a.padStart(t.length," ").substring(0,t.length):a.padEnd(t.length," ").substring(0,t.length)}i+="\r\n"}try{let a=e?e.name.replace(/\.(txt|xml)$/i,""):"ROSS1000",r="".concat(a).concat(t?"_VALIDI":"_ERRORI",".txt");console.log("✅ Generating client-side Blob for:",r);let l=new Blob([i],{type:"text/plain;charset=utf-8"}),s=URL.createObjectURL(l),n=document.createElement("a");n.href=s,n.download=r,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(s),console.log("✅ Download initiated")}catch(e){console.error("❌ Download failed:",e),alert("Errore durante il download: ".concat(e))}},e_=async e=>{e.preventDefault();try{let e=await fetch("".concat("","/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(er)}),t=await e.json();if(!e.ok)throw Error(t.error||"Login fallito");et(!1),el({email:"",password:"",regione:""}),ei(!0),alert("Login effettuato con successo! Ora puoi inviare l'XML a ROSS 1000.")}catch(e){alert("Errore login: ".concat(e.message))}};return a.some((e,t)=>!eN(t)&&0===(o[t]||[]).length),(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[(0,i.jsx)("header",{className:"bg-white border-b border-slate-200 shadow-sm sticky top-0 z-50",children:(0,i.jsx)("div",{className:"max-w-[1800px] mx-auto px-6 py-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("div",{className:"flex items-center gap-4",children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-teal-500 to-teal-600 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg shadow-teal-200",children:"R"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-xl font-semibold text-slate-800",children:"ROSS 1000"}),(0,i.jsx)("p",{className:"text-xs text-slate-500",children:"Validazione File TXT/XML"})]})]})}),(0,i.jsx)("div",{className:"flex items-center gap-3",children:(0,i.jsxs)(d,{variant:"outline",size:"sm",onClick:()=>{t(null),l([]),n([]),u({}),g({}),y({}),J({}),Q(""),et(!1),ei(!1),el({email:"",password:"",regione:""}),Y("valid"),X(null),G(null),$("");let e=document.getElementById("file-upload");e&&(e.value="")},className:"flex items-center gap-2 text-slate-600 hover:text-slate-800 border-slate-300",children:[(0,i.jsx)(A.A,{className:"h-4 w-4"}),"Reset"]})})]})})}),(0,i.jsxs)("main",{className:"max-w-[1800px] mx-auto px-6 py-8",children:[(0,i.jsx)("div",{className:"mb-8",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,i.jsx)("div",{className:"lg:col-span-2 bg-white rounded-2xl border-2 border-dashed border-slate-300 hover:border-teal-400 transition-all duration-300 p-8 relative group cursor-pointer hover:shadow-lg",children:(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-teal-100 to-teal-50 rounded-2xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:(0,i.jsx)(M.A,{className:"h-8 w-8 text-teal-600"})}),(0,i.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Carica File"}),(0,i.jsx)("p",{className:"text-sm text-slate-500 mb-4",children:"Trascina qui o clicca per caricare file TXT o XML"}),(0,i.jsx)(c,{id:"file-upload",type:"file",accept:".txt,.xml",onChange:eg,className:"absolute inset-0 opacity-0 cursor-pointer"}),e&&(0,i.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-teal-50 rounded-full text-teal-700 text-sm font-medium",children:[(0,i.jsx)(I.A,{className:"h-4 w-4"}),e.name]})]})}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 shadow-sm hover:shadow-md transition-shadow",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,i.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-blue-50 rounded-xl flex items-center justify-center",children:(0,i.jsx)(T.A,{className:"h-6 w-6 text-blue-600"})})}),(0,i.jsx)("div",{className:"text-3xl font-bold text-slate-800 mb-1",children:a.length}),(0,i.jsx)("div",{className:"text-sm text-slate-500",children:"Record Totali"})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 shadow-sm hover:shadow-md transition-shadow",children:[(0,i.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,i.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-red-100 to-red-50 rounded-xl flex items-center justify-center",children:(0,i.jsx)(R.A,{className:"h-6 w-6 text-red-600"})})}),(0,i.jsx)("div",{className:"text-3xl font-bold text-slate-800 mb-1",children:Object.values(o).reduce((e,t)=>e+t.length,0)}),(0,i.jsx)("div",{className:"text-sm text-slate-500",children:"Errori Rilevati"})]})]})}),s.length>0&&(0,i.jsxs)(S,{className:"mb-6 bg-red-50 border-red-200",variant:"destructive",children:[(0,i.jsx)(D.A,{className:"h-4 w-4"}),(0,i.jsx)(k,{children:(0,i.jsx)("div",{className:"space-y-1",children:s.map((e,t)=>(0,i.jsx)("div",{children:e},t))})})]}),a.length>0&&(0,i.jsxs)("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[(0,i.jsx)("div",{className:"px-6 py-4 border-b border-slate-200 bg-slate-50/50",children:(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,i.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,i.jsxs)("span",{className:"flex items-center gap-2 text-sm font-medium text-slate-700",children:[(0,i.jsx)(T.A,{className:"h-4 w-4"}),a.length," record totali"]}),Object.values(o).some(e=>e.length>0)&&(0,i.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[(0,i.jsx)(R.A,{className:"h-3 w-3"}),Object.values(o).reduce((e,t)=>e+t.length,0)," errori"]}),Object.values(Z).some(e=>e.hasWarnings)&&(0,i.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-700",children:[(0,i.jsx)(R.A,{className:"h-3 w-3"}),Object.values(Z).reduce((e,t)=>e+t.warnings.length,0)," avvertimenti"]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:["valid"===H&&(0,i.jsxs)(d,{onClick:()=>ew(!0),className:"flex items-center gap-2 bg-gradient-to-r from-teal-500 to-teal-600 hover:from-teal-600 hover:to-teal-700 text-white shadow-lg shadow-teal-200 hover:shadow-xl transition-all",disabled:0===a.filter((e,t)=>!eN(t)&&0===(o[t]||[]).length).length,children:[(0,i.jsx)(O.A,{className:"h-4 w-4"}),"Scarica TXT Valido"]}),"invalid"===H&&(0,i.jsxs)(d,{onClick:()=>ew(!1),className:"flex items-center gap-2 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white",disabled:0===a.filter((e,t)=>eN(t)||(o[t]||[]).length>0).length,children:[(0,i.jsx)(O.A,{className:"h-4 w-4"}),"Scarica TXT Non Valido"]})]})]})}),(0,i.jsxs)(w,{value:H,onValueChange:e=>Y(e),children:[(0,i.jsx)("div",{className:"px-6 border-b border-slate-200",children:(0,i.jsxs)(_,{className:"h-12 bg-transparent p-0 gap-0",children:[(0,i.jsxs)(E,{value:"valid",className:"relative h-12 px-6 rounded-none bg-transparent data-[state=active]:bg-transparent data-[state=active]:shadow-none border-b-2 border-transparent data-[state=active]:border-teal-500 data-[state=active]:text-teal-600 text-slate-500 hover:text-slate-700 transition-colors",children:[(0,i.jsx)(I.A,{className:"h-4 w-4 mr-2"}),"Record Validi (",a.filter((e,t)=>!eN(t)&&0===(o[t]||[]).length).length,")"]}),(0,i.jsxs)(E,{value:"invalid",className:"relative h-12 px-6 rounded-none bg-transparent data-[state=active]:bg-transparent data-[state=active]:shadow-none border-b-2 border-transparent data-[state=active]:border-red-500 data-[state=active]:text-red-600 text-slate-500 hover:text-slate-700 transition-colors",children:[(0,i.jsx)(R.A,{className:"h-4 w-4 mr-2"}),"Record Non Validi (",a.filter((e,t)=>eN(t)||(o[t]||[]).length>0).length,")"]})]})}),(0,i.jsx)(C,{value:"valid",className:"m-0",children:(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsx)("div",{className:"overflow-y-auto",style:{maxHeight:"65vh"},children:(0,i.jsxs)("table",{className:"w-full text-sm",children:[(0,i.jsx)("thead",{className:"sticky top-0 z-20",children:(0,i.jsxs)("tr",{className:"bg-gradient-to-r from-teal-500 to-teal-600 text-white",children:[(0,i.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-xs uppercase tracking-wider border-r border-teal-400/30 sticky left-0 z-30 bg-gradient-to-r from-teal-500 to-teal-600",style:{minWidth:"60px"},children:"#"}),L.map(e=>(0,i.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-xs uppercase tracking-wider border-r border-teal-400/30 whitespace-nowrap",style:{minWidth:(3===e.id||4===e.id||14===e.id||15===e.id||16===e.id||17===e.id?60:1===e.id?130:5===e.id?70:19===e.id||20===e.id?150:24===e.id?60:26===e.id||[2,6,7,9,10,11,13,18].includes(e.id)?110:Math.max(8*e.length,90))+"px"},children:e.name},e.id))]})}),(0,i.jsx)("tbody",{className:"divide-y divide-slate-100",children:a.map((e,t)=>{let a=eN(t),r=(o[t]||[]).length>0,l=Z[t];return a||r?null:(0,i.jsxs)("tr",{className:"hover:bg-teal-50/50 transition-colors",children:[(0,i.jsx)("td",{className:"px-4 py-3 font-medium text-slate-600 border-r border-slate-100 sticky left-0 z-10 bg-white",style:{minWidth:"60px"},children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-teal-100 text-teal-700 text-xs font-bold",children:t+1}),(null==l?void 0:l.hasWarnings)&&(0,i.jsx)("div",{className:"w-2 h-2 bg-amber-400 rounded-full",title:"Avvertimenti"})]})}),L.map(e=>em(t,e.id))]},t)})})]})})})}),(0,i.jsx)(C,{value:"invalid",className:"m-0",children:(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsx)("div",{className:"overflow-y-auto",style:{maxHeight:"65vh"},children:(0,i.jsxs)("table",{className:"w-full text-sm",children:[(0,i.jsx)("thead",{className:"sticky top-0 z-20",children:(0,i.jsxs)("tr",{className:"bg-gradient-to-r from-red-500 to-red-600 text-white",children:[(0,i.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-xs uppercase tracking-wider border-r border-red-400/30 sticky left-0 z-30 bg-gradient-to-r from-red-500 to-red-600",style:{minWidth:"60px"},children:"#"}),L.map(e=>(0,i.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-xs uppercase tracking-wider border-r border-red-400/30 whitespace-nowrap",style:{minWidth:(3===e.id||4===e.id||14===e.id||15===e.id||16===e.id||17===e.id?60:1===e.id?130:5===e.id?70:19===e.id||20===e.id?150:24===e.id?60:26===e.id||[2,6,7,9,10,11,13,18].includes(e.id)?110:Math.max(8*e.length,90))+"px"},children:e.name},e.id))]})}),(0,i.jsx)("tbody",{className:"divide-y divide-slate-100",children:a.map((e,t)=>{let a=eN(t),r=(o[t]||[]).length>0,l=Z[t];return a||r?(0,i.jsxs)("tr",{className:"hover:bg-red-50/50 transition-colors bg-red-50/30",children:[(0,i.jsx)("td",{className:"px-4 py-3 font-medium text-slate-600 border-r border-slate-100 sticky left-0 z-10 bg-red-50/30",style:{minWidth:"60px"},children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-red-100 text-red-700 text-xs font-bold",children:t+1}),(null==l?void 0:l.hasWarnings)&&(0,i.jsx)("div",{className:"w-2 h-2 bg-amber-400 rounded-full",title:"Avvertimenti"})]})}),L.map(e=>em(t,e.id))]},t):null})})]})})})})]})]}),j&&(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center py-16",children:[(0,i.jsx)("div",{className:"w-12 h-12 border-4 border-teal-200 border-t-teal-500 rounded-full animate-spin mb-4"}),(0,i.jsx)("p",{className:"text-slate-600 font-medium",children:"Elaborazione file in corso..."})]}),!j&&0===a.length&&(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center py-24 text-center",children:[(0,i.jsx)("div",{className:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mb-6",children:(0,i.jsx)(T.A,{className:"h-10 w-10 text-slate-400"})}),(0,i.jsx)("h3",{className:"text-xl font-semibold text-slate-700 mb-2",children:"Nessun file caricato"}),(0,i.jsx)("p",{className:"text-slate-500 max-w-md",children:"Carica un file TXT o XML per iniziare la validazione dei dati ROSS 1000"})]})]}),ee&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>et(!1),children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl p-8 w-[380px] shadow-2xl relative",onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("button",{onClick:()=>et(!1),className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600 transition-colors",children:(0,i.jsx)(V.A,{className:"h-5 w-5"})}),(0,i.jsxs)("div",{className:"text-center mb-6",children:[(0,i.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-teal-500 to-teal-600 rounded-xl flex items-center justify-center text-white font-bold text-lg mx-auto mb-4",children:"R"}),(0,i.jsx)("h3",{className:"text-xl font-semibold text-slate-800",children:"Accedi per inviare"})]}),(0,i.jsxs)("form",{onSubmit:e_,className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Regione"}),(0,i.jsx)("select",{value:er.regione,onChange:e=>el({...er,regione:e.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all",required:!0,children:[{value:"",label:"Seleziona regione..."},{value:"abruzzo",label:"Abruzzo"},{value:"basilicata",label:"Basilicata"},{value:"calabria",label:"Calabria"},{value:"campania",label:"Campania"},{value:"emilia-romagna",label:"Emilia-Romagna"},{value:"friuli-venezia-giulia",label:"Friuli-Venezia Giulia"},{value:"lazio",label:"Lazio"},{value:"liguria",label:"Liguria"},{value:"lombardia",label:"Lombardia"},{value:"marche",label:"Marche"},{value:"molise",label:"Molise"},{value:"piemonte",label:"Piemonte"},{value:"puglia",label:"Puglia"},{value:"sardegna",label:"Sardegna"},{value:"sicilia",label:"Sicilia"},{value:"toscana",label:"Toscana"},{value:"trentino-alto-adige",label:"Trentino-Alto Adige"},{value:"umbria",label:"Umbria"},{value:"valle-d'aosta",label:"Valle d'Aosta"},{value:"veneto",label:"Veneto"}].map(e=>(0,i.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email"}),(0,i.jsx)("input",{type:"email",value:er.email,onChange:e=>el({...er,email:e.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all",placeholder:"email@hotel.com",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Password"}),(0,i.jsx)("input",{type:"password",value:er.password,onChange:e=>el({...er,password:e.target.value}),className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent transition-all",placeholder:"********",required:!0})]}),(0,i.jsx)("button",{type:"submit",className:"w-full bg-gradient-to-r from-teal-500 to-teal-600 hover:from-teal-600 hover:to-teal-700 text-white px-4 py-3 rounded-xl font-medium transition-all shadow-lg shadow-teal-200",children:"Login"})]})]})})]})}},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var i=a(2596),r=a(9688);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,i.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[798,555,441,684,358],()=>t(2537)),_N_E=e.O()}]);